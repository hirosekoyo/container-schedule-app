忘備録
 col-spanで表示の割合を調整できる。
基本的にはプラス１５メートル、マイナス１４メートルのルールなのに、たまにポートオブ博多でマイナす１５の時があり、それには対応していない。

３３から３５ビットの間隔は３０メートルではないので注意

使い方ガイドにスマホのPWAのURL
印刷時に倍率を100％にする。入りきらない場合だけ倍率を下げる。
印刷プレビューを閉じるときは、タブを直接閉じるのではなく、キャンセルボタンを押す。（テキストボックスが入力できなくなる）

多分極限位置間違えている

型定義更新
npx supabase gen types typescript --linked > src/types/database.types.ts

npm install

 
作業メモ

　今まで色々な要件を追加したため、インポート時の処理が錯綜しているかもしれません。改めて要件を定義しますので、一から作成してください。インポート処理やDB関数を。
インポート処理の要件
・インポートするデータから、berth_number、arrival_time、departure_time、arrival_side、bow_position_m、stern_position_mの６つの値を連結して、data_hashの値にする。
・schedule_dateとship_nameが存在しない場合、各項目をinsertする
・schedule_dateとship_nameが存在しするばあい、以下の条件で任意の項目だけ更新する。
・schedule_dateとship_nameが存在していて、data_hashの値が同じ場合、last_import_idのみ更新する。
・schedule_dateとship_nameが存在していて、data_hashの値が異なる場合、新しいデータ（berth_number、arrival_time、departure_time、arrival_side、bow_position_m、stern_position_mのいずれかのみ）とlast_import_id更新する。さらに更新のあったフィールドの項目名でchanged_fieldsを更新する。
・berth_numberが”5”の船はschedule_dateとship_nameで存在確認をして以下の条件で必ずupsertする。
・berth_numberが”5”の船はparser.tsで指定したremarksの値とchanged_fields[ "bow_position_m","stern_position_m"固定値]の値を必ず更新する。

data_hashをberth_number、arrival_time、departure_time、arrival_side、bow_position_m、stern_position_mの６つにする。

hakata@futo.com
373150


https://maskable.app/editor
https://www.pwabuilder.com/imageGenerator
アイコン作成サイト


「将来、別のAIや開発者に引き継ぐ際に、この要件定義書だけでプロジェクトを完全に再現できるか」という観点で、要件定義書を更新してください。
あたらしく追加したテーブルのカラムやDB関数なども更新しくてださい。
プロジェクトディレクトリ構成と各ファイルの概要説明も最新化してください。
以下の現在のバージョンをもとに作成して、要件定義書全体を表示してください。

いい感じです。33ビットより左にはみ出している船も正しく描画されるようになりました。


実装したい

済み　風速情報を別コンポーネントにして、風速によって色を帰る。
済み　風を色分け、ガントチャートを３時間毎にして、風によって色分け
済み　荷役予定詳細にPとTを追加する。
済み　荷役予定詳細に印刷時だけ、強風連絡項目を入れる。
済み　点検区分を追加する。
済み　かわし、ミーティング追加。
済み　アンカー位置最新化
済み　pilot,tugの項目追加
済み　ギャング数追加
済み　プランなを代理店ではなく荷役会社からインポートする。
済み　極限情報を最新晩にする。
済み　日次モーダルを開くときのカーソルを変える
済み　点検区分を変更で123ではなくc1、c2、Dにする。
済み　スマホピンチいん、ピンチアウと
済み　アナリティクス
済み　スマホアプリ更新時間表示をつける。
済み　船間距離を追加

ダッシュボードにホーム画面ボタン。
モーダルのピンチイン。
風速の色をグレーにする。

掲示板機能
from to例〜日の当直へ ハッシュタグ読んだら削除して、まるまる日まで保存。
編集ボタン、削除ボタン、アナウンスボタン、ピン止めボタン、ダッシュボードにアナウンスバッジを付ける

ズームインの時に船の図がガクガク動くようになりました。原因を調査してください。
船間のメートルに小数点以下は表示しないようにしてください。
それから何もないところをタップしたときに、船の選択を解除してトーストも消えるようにしてください。

モバイル画面に船間表示モードを作成します。
船間表示モードと船情報表示モードは対になります。
初期表示は船情報表示モードです。
メニューに船間表示モード切り替えボタンを作成します。
船間表示モードになると船を選択できるようになります。
そして、2個目の船を選択すると、1個めの船との船間距離を表示します。（モーダルやトーストなどおすすめを提案してください。）
例　船名Aと船名Bの船間〇〇m
位置が重なっている場合は０ｍで表示します。
船同士の内側の位置（おもて、とも）を使って計算することになると思います。
同じ船をタップすると選択を解除します。
3つ目の船をタップすると、1つ目の船の選択を解除して、2つ目の船との距離を表示します。


船の間を計算する。

IC香椎フラグを追加するか確認してから、要件定義書を更新。

スマホアプリ更新時間表示をつける。

ダッシュボード画面に香椎IC切り替えボタンを作る。
パーサーとガントチャートコンポーネントだけ香椎用を作ればよい？
リセットボタンでIC香椎消えるようにしても大丈夫！

スマホのIC香椎出し分けは、IDで分けるか、キャッシュで直近に開いていた方を覚えるか？

 香椎とICのテーブルどうするか？
 テーブルに香椎ICの列を追加する。か
 香椎用のテーブルを作るか？