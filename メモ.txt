忘備録
 col-spanで表示の割合を調整できる。
基本的にはプラス１５メートル、マイナス１４メートルのルールなのに、たまにポートオブ博多でマイナす１５の時があり、それには対応していない。

**「将来、別のAIや開発者に引き継ぐ際に、この要件定義書だけでプロジェクトを完全に再現できるか」**という観点で、要件定義書を更新してください。そして要件定義書全体を表示してください。

３３から３５ビットの間隔は３０メートルではないので注意

使い方ガイドにスマホのPWAのURL
印刷時に倍率を100％にする。入りきらない場合だけ倍率を下げる。
 
実装したい アイデア

 ○ Compiling /mobile/[date] ...
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (108kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
 ✓ Compiled /mobile/[date] in 8.2s (2655 modules)

スマホ用の画面は当日を初期表示するようにして、船をタップすると荷役情報を表示する。　
スマホのページを初期ページにする。
 
 香椎とICのテーブルどうするか？
 テーブルに香椎ICの列を追加する。か
 香椎用のテーブルを作るか？
 
作業メモ

５岸のときは、おもて、ともの変更フラグをつけて備考に着岸位置を確認することを明記！
ガントチャートの３５ビット未満の描画を正確にする。


　今まで色々な要件を追加したため、インポート時の処理が錯綜しているかもしれません。改めて要件を定義しますので、一から作成してください。インポート処理やDB関数を。
インポート処理の要件
・インポートするデータから、berth_number、arrival_time、departure_time、arrival_side、bow_position_m、stern_position_mの６つの値を連結して、data_hashの値にする。
・schedule_dateとship_nameが存在しない場合、各項目をinsertする
・schedule_dateとship_nameが存在しするばあい、以下の条件で任意の項目だけ更新する。
・schedule_dateとship_nameが存在していて、data_hashの値が同じ場合、last_import_idのみ更新する。
・schedule_dateとship_nameが存在していて、data_hashの値が異なる場合、新しいデータ（berth_number、arrival_time、departure_time、arrival_side、bow_position_m、stern_position_mのいずれかのみ）とlast_import_id更新する。さらに更新のあったフィールドの項目名でchanged_fieldsを更新する。
・berth_numberが”5”の船はschedule_dateとship_nameで存在確認をして以下の条件で必ずupsertする。
・berth_numberが”5”の船はparser.tsで指定したremarksの値とchanged_fields[ "bow_position_m","stern_position_m"固定値]の値を必ず更新する。

data_hashをberth_number、arrival_time、departure_time、arrival_side、bow_position_m、stern_position_mの６つにする。

hakata@futo.com
373150

次はスマホから開く専用の画面を作成します。
・スマホの画面サイズに最適化されたガントチャートを表示する。
・船舶をタップすると、予定編集モーダルではなく、該当する荷役予定詳細の項目と同じデータをスマホに最適化されてモーダルで表示します。

いい感じですが、追加の修正をお願いします。
・縦軸の時間が16時までしか表示されておらずスクロールに追従していないので修正してください。
・縦軸の時間は左側に横軸のビット番号は上側に常に固定表示して、ガントチャートの罫線と同じようにスクロールに追従するようにしてください。
・モーダルは画面を占有するのではなく、船舶から吹き出しのように出す。
・モーダルを開いてもスクロールができて、次の船をタップすると、前の吹き出しを閉じてタップした船の吹き出しを表示する。

PWA対応させてください。
・start_urlは/mobile/当日の日付　にしたいです。
・アドレスバーは表示されないようにして、スクロールによるバウンスも抑制してください。

DateNavigatorの右側に情報ボタンを追加して、押すとsrc\lib\constants.tsで定義したアンカー位置と、極限位置をを表にしたモーダルを表示させてください。


https://maskable.app/editor
https://www.pwabuilder.com/imageGenerator
アイコン作成サイト

